<html>
     <script>
          function sleep(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
}
function setter() {
  document.getElementById("y").innerHTML = 10;
}
function process(event) {
  var y = document.getElementById("y").innerHTML;
  var files = event.target.files
  var reader = new FileReader()
  reader.onload = function() {
    var contents = this.result
async function demo() {
    for (let j = 0; j < y; j++) {
      if( j % 5 == 0) {
        await sleep(10);
      }
      document.getElementById("y").innerHTML += j;
      console.log(contents.substr(j, 1));
      let x = contents.substr(j, 1)
      document.getElementById("z").innerHTML += (x);

    }
  }
  demo();
}

  reader.readAsText(files[0])
}

var input = document.querySelector('.file')
input.addEventListener('change', process, false)
     </script>
     <style>
          .body {
  background: black;
}
.p {
  color: green;
}
     </style>
  <body class='body' onkeydown="process(event)" onload="setter()">
<input type="file" class="file"/>
<div class='p'>
<p id='z'></p>
<p id='y'></p>
    </div>
    <body>
</html>
